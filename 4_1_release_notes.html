<!DOCTYPE html>

<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>

<title>Ruby on Rails 4.1 릴리스 노트 — Ruby on Rails Guides</title>
<link rel="stylesheet" type="text/css" href="stylesheets/style.css" />
<link rel="stylesheet" type="text/css" href="stylesheets/print.css" media="print" />

<link rel="stylesheet" type="text/css" href="stylesheets/syntaxhighlighter/shCore.css" />
<link rel="stylesheet" type="text/css" href="stylesheets/syntaxhighlighter/shThemeRailsGuides.css" />

<link rel="stylesheet" type="text/css" href="stylesheets/fixes.css" />

<link href="images/favicon.ico" rel="shortcut icon" type="image/x-icon" />
</head>
<body class="guide">
  <div id="topNav">
    <div class="wrapper">
      <strong class="more-info-label">More at <a href="http://rubyonrails.org/">rubyonrails.org:</a> </strong>
      <span class="red-button more-info-button">
        More Ruby on Rails
      </span>
      <ul class="more-info-links s-hidden">
        <li class="more-info"><a href="http://weblog.rubyonrails.org/">블로그</a></li>
        <li class="more-info"><a href="http://guides.rubyonrails.org/">가이드(영문)</a></li>
        <li class="more-info"><a href="http://api.rubyonrails.org/">API</a></li>
        <li class="more-info"><a href="http://stackoverflow.com/questions/tagged/ruby-on-rails">도움을 요청하기</a></li>
        <li class="more-info"><a href="https://github.com/rails/rails">기여하기</a></li>
        <li class="more-info"><a href="https://github.com/riseshia/railsguides.kr">번역 가이드 저장소</a></li>
      </ul>
    </div>
  </div>
  <div id="header">
    <div class="wrapper clearfix">
      <h1><a href="index.html" title="Return to home page">Guides.rubyonrails.org</a></h1>
      <ul class="nav">
        <li><a class="nav-item" href="index.html">홈</a></li>
        <li class="guides-index guides-index-large">
          <a href="index.html" id="guidesMenu" class="guides-index-item nav-item">가이드 인덱스</a>
          <div id="guides" class="clearfix" style="display: none;">
            <hr />
              <dl class="L">
                <dt>시작하기 전에</dt>
                <dd><a href="getting_started.html">레일스 시작하기</a></dd>
                <dt>Model</dt>
                <dd><a href="active_record_basics.html">Active Record 기초</a></dd>
                <dd><a href="active_record_migrations.html">Active Record Migrations</a></dd>
                <dd><a href="active_record_validations.html">Active Record Validations</a></dd>
                <dd><a href="active_record_callbacks.html">Active Record Callbacks</a></dd>
                <dd><a href="association_basics.html">Active Record Associations</a></dd>
                <dd><a href="active_record_querying.html">Active Record Query Interface</a></dd>
                <dt>View</dt>
                <dd><a href="layouts_and_rendering.html">레이아웃과 랜더링</a></dd>
                <dd><a href="form_helpers.html">Action View Form Helper</a></dd>
                <dt>Controller</dt>
                <dd><a href="action_controller_overview.html">Action Controller 개요</a></dd>
                <dd><a href="routing.html">레일스 라우팅</a></dd>
              </dl>
              <dl class="R">
                <dt>심화 주제</dt>
                <dd><a href="active_support_core_extensions.html">Active Support 코어 확장 기능</a></dd>
                <dd><a href="i18n.html">레일스 국제화(i18n) API</a></dd>
                <dd><a href="action_mailer_basics.html">Action Mailer Basics</a></dd>
                <dd><a href="active_job_basics.html">Active Job Basics</a></dd>
                <dd><a href="testing.html">레일스 애플리케이션 테스트하기</a></dd>
                <dd><a href="security.html">레일스 보안 가이드</a></dd>
                <dd><a href="debugging_rails_applications.html">레일스 애플리케이션 디버깅</a></dd>
                <dd><a href="configuring.html">레일스 애플리케이션 설정하기</a></dd>
                <dd><a href="command_line.html">레일스 커맨드 라인</a></dd>
                <dd><a href="asset_pipeline.html">애셋 파이프라인</a></dd>
                <dd><a href="working_with_javascript_in_rails.html">레일스에서 JavaScript 사용하기</a></dd>
                <dd><a href="autoloading_and_reloading_constants.html">상수 자동 읽기와 다시 읽기</a></dd>
                <dd><a href="caching_with_rails.html">레일스에서 캐싱하기</a></dd>
                <dd><a href="api_app.html">레일스로 API 전용 애플리케이션 만들기</a></dd>
                <dd><a href="action_cable_overview.html">Action Cable 살펴보기</a></dd>
                <dt>레일스 확장하기</dt>
                <dd><a href="rails_on_rack.html">Rails와 Rack</a></dd>
                <dd><a href="generators.html">레일스 제너레이터와 템플릿</a></dd>
                <dt>Ruby on Rails 에 기여하기</dt>
                <dd><a href="contributing_to_ruby_on_rails.html">Ruby on Rails에 기여하는 방법</a></dd>
                <dd><a href="ruby_on_rails_guides_guidelines.html">레일스 가이드의 가이드라인</a></dd>
                <dt>Maintenance Policy</dt>
                <dd><a href="maintenance_policy.html">Maintenance Policy</a></dd>
                <dt>릴리스 노트</dt>
                <dd><a href="upgrading_ruby_on_rails.html">레일스 업그레이드 가이드</a></dd>
                <dd><a href="5_0_release_notes.html">Ruby on Rails 5.0 릴리스 노트</a></dd>
                <dd><a href="4_2_release_notes.html">Ruby on Rails 4.2 릴리스 노트</a></dd>
                <dd><a href="4_1_release_notes.html">Ruby on Rails 4.1 릴리스 노트</a></dd>
                <dd><a href="4_0_release_notes.html">Ruby on Rails 4.0 릴리스 노트</a></dd>
                <dd><a href="3_2_release_notes.html">Ruby on Rails 3.2 Release Notes [미번역]</a></dd>
                <dd><a href="3_1_release_notes.html">Ruby on Rails 3.1 Release Notes [미번역]</a></dd>
                <dd><a href="3_0_release_notes.html">Ruby on Rails 3.0 Release Notes [미번역]</a></dd>
                <dd><a href="2_3_release_notes.html">Ruby on Rails 2.3 Release Notes [미번역]</a></dd>
                <dd><a href="2_2_release_notes.html">Ruby on Rails 2.2 Release Notes [미번역]</a></dd>
              </dl>
          </div>
        </li>
        <li><a class="nav-item" href="contributing_to_ruby_on_rails.html">기여하기</a></li>
        <li><a class="nav-item" href="credits.html">크레딧</a></li>
        <li class="guides-index guides-index-small">
          <select class="guides-index-item nav-item">
            <option value="index.html">가이드 인덱스</option>
              <optgroup label="시작하기 전에">
                  <option value="getting_started.html">레일스 시작하기</option>
              </optgroup>
              <optgroup label="Model">
                  <option value="active_record_basics.html">Active Record 기초</option>
                  <option value="active_record_migrations.html">Active Record Migrations</option>
                  <option value="active_record_validations.html">Active Record Validations</option>
                  <option value="active_record_callbacks.html">Active Record Callbacks</option>
                  <option value="association_basics.html">Active Record Associations</option>
                  <option value="active_record_querying.html">Active Record Query Interface</option>
              </optgroup>
              <optgroup label="View">
                  <option value="layouts_and_rendering.html">레이아웃과 랜더링</option>
                  <option value="form_helpers.html">Action View Form Helper</option>
              </optgroup>
              <optgroup label="Controller">
                  <option value="action_controller_overview.html">Action Controller 개요</option>
                  <option value="routing.html">레일스 라우팅</option>
              </optgroup>
              <optgroup label="심화 주제">
                  <option value="active_support_core_extensions.html">Active Support 코어 확장 기능</option>
                  <option value="i18n.html">레일스 국제화(i18n) API</option>
                  <option value="action_mailer_basics.html">Action Mailer Basics</option>
                  <option value="active_job_basics.html">Active Job Basics</option>
                  <option value="testing.html">레일스 애플리케이션 테스트하기</option>
                  <option value="security.html">레일스 보안 가이드</option>
                  <option value="debugging_rails_applications.html">레일스 애플리케이션 디버깅</option>
                  <option value="configuring.html">레일스 애플리케이션 설정하기</option>
                  <option value="command_line.html">레일스 커맨드 라인</option>
                  <option value="asset_pipeline.html">애셋 파이프라인</option>
                  <option value="working_with_javascript_in_rails.html">레일스에서 JavaScript 사용하기</option>
                  <option value="autoloading_and_reloading_constants.html">상수 자동 읽기와 다시 읽기</option>
                  <option value="caching_with_rails.html">레일스에서 캐싱하기</option>
                  <option value="api_app.html">레일스로 API 전용 애플리케이션 만들기</option>
                  <option value="action_cable_overview.html">Action Cable 살펴보기</option>
              </optgroup>
              <optgroup label="레일스 확장하기">
                  <option value="rails_on_rack.html">Rails와 Rack</option>
                  <option value="generators.html">레일스 제너레이터와 템플릿</option>
              </optgroup>
              <optgroup label="Ruby on Rails 에 기여하기">
                  <option value="contributing_to_ruby_on_rails.html">Ruby on Rails에 기여하는 방법</option>
                  <option value="ruby_on_rails_guides_guidelines.html">레일스 가이드의 가이드라인</option>
              </optgroup>
              <optgroup label="Maintenance Policy">
                  <option value="maintenance_policy.html">Maintenance Policy</option>
              </optgroup>
              <optgroup label="릴리스 노트">
                  <option value="upgrading_ruby_on_rails.html">레일스 업그레이드 가이드</option>
                  <option value="5_0_release_notes.html">Ruby on Rails 5.0 릴리스 노트</option>
                  <option value="4_2_release_notes.html">Ruby on Rails 4.2 릴리스 노트</option>
                  <option value="4_1_release_notes.html">Ruby on Rails 4.1 릴리스 노트</option>
                  <option value="4_0_release_notes.html">Ruby on Rails 4.0 릴리스 노트</option>
                  <option value="3_2_release_notes.html">Ruby on Rails 3.2 Release Notes [미번역]</option>
                  <option value="3_1_release_notes.html">Ruby on Rails 3.1 Release Notes [미번역]</option>
                  <option value="3_0_release_notes.html">Ruby on Rails 3.0 Release Notes [미번역]</option>
                  <option value="2_3_release_notes.html">Ruby on Rails 2.3 Release Notes [미번역]</option>
                  <option value="2_2_release_notes.html">Ruby on Rails 2.2 Release Notes [미번역]</option>
              </optgroup>
          </select>
        </li>
      </ul>
      </div>
    </div>
  </div>
  <hr class="hide" />

  <div id="feature">
    <div class="wrapper">
      <h2>Ruby on Rails 4.1 릴리스 노트</h2><p>Rails 4.1 주요 변경점</p>
<ul>
<li>애플리케이션 로더 Spring</li>
<li><code>config/secrets.yml</code></li>
<li>Action Pack Variant</li>
<li>Action Mailer 프리뷰</li>
</ul>
<p>이 릴리스 노트는 주요한 변경점만을 설명합니다. 자잘한 버그 수정이나 변경에 대해서는 CHANGELOG를 참고하거나, GitHub의 Rails 저장소에 있는 <a href="https://github.com/rails/rails/commits/master">커밋 목록</a>을 참조해주세요.</p>

                <div id="subCol">
            <h3 class="chapter"><img src="images/chapters_icon.gif" alt="" />Chapters</h3>
            <ol class="chapters">
<li><a href="#rails-4-1%EB%A1%9C-%EC%97%85%EA%B7%B8%EB%A0%88%EC%9D%B4%EB%93%9C">Rails 4.1로 업그레이드</a></li>
<li>
<a href="#%EC%A3%BC%EC%9A%94-%EB%B3%80%EA%B2%BD%EC%A0%90">주요 변경점</a>

<ul>
<li><a href="#spring-%EC%95%A0%ED%94%8C%EB%A6%AC%EC%BC%80%EC%9D%B4%EC%85%98-%EB%A1%9C%EB%8D%94">'Spring' 애플리케이션 로더</a></li>
<li><a href="#config-secrets-yml"><code>config/secrets.yml</code></a></li>
<li><a href="#action-pack-variant">Action Pack Variant</a></li>
<li><a href="#action-mailer-%ED%94%84%EB%A6%AC%EB%B7%B0">Action Mailer 프리뷰</a></li>
<li><a href="#active-record-enums">Active Record enums</a></li>
<li><a href="#%EB%A9%94%EC%8B%9C%EC%A7%80-%EA%B2%80%EC%A6%9D%EC%9E%90">메시지 검증자</a></li>
<li><a href="#module-concerning">Module#concerning</a></li>
<li><a href="#%EC%9B%90%EA%B2%A9-script-%ED%83%9C%EA%B7%B8%EC%97%90-csrf-%EB%B3%B4%ED%98%B8%EB%A5%BC-%EC%A0%81%EC%9A%A9">원격 <code>&lt;script&gt;</code> 태그에 CSRF 보호를 적용</a></li>
</ul>
</li>
<li>
<a href="#railties">Railties</a>

<ul>
<li><a href="#railties-%EC%82%AD%EC%A0%9C%EB%90%9C-%EA%B2%83%EB%93%A4">삭제된 것들</a></li>
<li><a href="#railties-%EC%A3%BC%EC%9A%94-%EB%B3%80%EA%B2%BD%EC%A0%90">주요 변경점</a></li>
</ul>
</li>
<li>
<a href="#action-pack">Action Pack</a>

<ul>
<li><a href="#action-pack-%EC%82%AD%EC%A0%9C%EB%90%9C-%EA%B2%83%EB%93%A4">삭제된 것들</a></li>
<li><a href="#action-pack-%EC%A3%BC%EC%9A%94-%EB%B3%80%EA%B2%BD%EC%A0%90">주요 변경점</a></li>
</ul>
</li>
<li>
<a href="#action-mailer">Action Mailer</a>

<ul>
<li><a href="#action-mailer-%EC%A3%BC%EC%9A%94-%EB%B3%80%EA%B2%BD%EC%A0%90">주요 변경점</a></li>
</ul>
</li>
<li>
<a href="#active-record">Active Record</a>

<ul>
<li><a href="#active-record-%EC%82%AD%EC%A0%9C%EB%90%9C-%EA%B2%83%EB%93%A4">삭제된 것들</a></li>
<li><a href="#active-record-deprecated">Deprecated</a></li>
<li><a href="#active-record-%EC%A3%BC%EC%9A%94-%EB%B3%80%EA%B2%BD%EC%A0%90">주요 변경점</a></li>
</ul>
</li>
<li>
<a href="#active-model">Active Model</a>

<ul>
<li><a href="#active-model-deprecated">Deprecated</a></li>
<li><a href="#active-model-%EC%A3%BC%EC%9A%94-%EB%B3%80%EA%B2%BD%EC%A0%90">주요 변경점</a></li>
</ul>
</li>
<li>
<a href="#active-support">Active Support</a>

<ul>
<li><a href="#active-support-%EC%82%AD%EC%A0%9C%EB%90%9C-%EA%B2%83%EB%93%A4">삭제된 것들</a></li>
<li><a href="#deprecated">Deprecated</a></li>
<li><a href="#active-support-%EC%A3%BC%EC%9A%94-%EB%B3%80%EA%B2%BD%EC%A0%90">주요 변경점</a></li>
</ul>
</li>
<li><a href="#%ED%81%AC%EB%A0%88%EB%94%A7-%ED%91%9C%EA%B8%B0">크레딧 표기</a></li>
</ol>

          </div>

    </div>
  </div>

  <div id="container">
    <div class="wrapper">
      <div id="mainCol">
        <h3 id="rails-4-1로-업그레이드"><a class="anchorlink" href="#rails-4-1%EB%A1%9C-%EC%97%85%EA%B7%B8%EB%A0%88%EC%9D%B4%EB%93%9C">1 Rails 4.1로 업그레이드</a></h3><p>기존 애플리케이션을 업그레이드한다면 그 전에 충분한 테스트 커버리지를 확보하는 것은 좋은 생각입니다. 애플리케이션이 Rails 4.0까지 업그레이드되지 않았을 경우에는 이부터 시작하고, 애플리케이션이 정상적으로 동작하는 것을 충분히 확인한 뒤에 Rails 4.1으로 업데이트 해주세요. 업그레이드의 주의점에 대해서는 <a href="upgrading_ruby_on_rails.html#rails-4-0%EC%97%90%EC%84%9C-Rails-4-1%EB%A1%9C-%EC%97%85%EA%B7%B8%EB%A0%88%EC%9D%B4%EB%93%9C">Ruby on Rails 업그레이드 가이드</a>를 참고해주세요.</p><h3 id="주요-변경점"><a class="anchorlink" href="#%EC%A3%BC%EC%9A%94-%EB%B3%80%EA%B2%BD%EC%A0%90">2 주요 변경점</a></h3><h4 id="spring-애플리케이션-로더"><a class="anchorlink" href="#spring-%EC%95%A0%ED%94%8C%EB%A6%AC%EC%BC%80%EC%9D%B4%EC%85%98-%EB%A1%9C%EB%8D%94">2.1 'Spring' 애플리케이션 로더</a></h4><p>Spring은 Rails 애플리케이션을 위한 로더입니다. 애플리케이션을 백그라운드에서 상주시켜두는 것으로 개발 속도를 향상시키며, 테스트나 rake 태스크, 마이그레이션을 실행할 때마다 Rails를 기동하지 않아도 됩니다.</p><p>Rails 4.1 애플리케이션에 포함되는 bunstub은 'spring화'되어있습니다. 이러한 애플리케이션의 최상단 폴더에서 <code>bin/rails</code>와 <code>bin/rake</code>를 실행하면 자동적으로 spring 환경을 미리 로딩합니다.</p><p><strong>rake 태스크를 실행:</strong></p><div class="code_container">
<pre class="brush: plain; gutter: false; toolbar: false">
bin/rake test:models

</pre>
</div>
<p><strong>Rails 명령을 실행:</strong></p><div class="code_container">
<pre class="brush: plain; gutter: false; toolbar: false">
bin/rails console

</pre>
</div>
<p><strong>Spring의 상태 확인:</strong></p><div class="code_container">
<pre class="brush: plain; gutter: false; toolbar: false">
$ bin/spring status
Spring is running:

1182 spring server | my_app | started 29 mins ago
3656 spring app    | my_app | started 23 secs ago | test mode
3746 spring app    | my_app | started 10 secs ago | development mode

</pre>
</div>
<p>Spring의 모든 기능에 대해서는 <a href="https://github.com/rails/spring/blob/master/README.md">Spring README</a>를 참고해주세요.</p><p><a href="upgrading_ruby_on_rails.html#spring">Ruby on Rails 업그레이드가이드</a>에서는 이 기능을 기존의 애플리케이션에 통합하는 방법에 대해서 설명합니다.</p><h4 id="config-secrets-yml"><a class="anchorlink" href="#config-secrets-yml">2.2 <code>config/secrets.yml</code></a></h4><p>Rails 4.1에서는 <code>config</code> 폴더에 새롭게 <code>secrets.yml</code> 파일이 생성되었습니다. 기본으로 이 파일에는 애플리케이션의 <code>secret_key_base</code>가 포함되어 있습니다만, 외부 API용의 접근 키 등의 비밀키도 여기에 저장합니다.</p><p>이 파일에 저장되어있는 비밀키는 <code>Rails.application.secrets</code>를 통해서 접근할 수 있습니다. 예를 들어, 다음의 <code>config/secrets.yml</code>를 확인해봅시다.</p><div class="code_container">
<pre class="brush: plain; gutter: false; toolbar: false">
development:
  secret_key_base: 3b7cd727ee24e8444053437c36cc66c3
  some_api_key: SOMEKEY

</pre>
</div>
<p>이 설정을 한 경우 development 환경에서 <code>Rails.application.secrets.some_api_key</code>를 실행하면 <code>SOMEKEY</code>가 반환됩니다.</p><p>기존의 애플리케이션에 이 기능을 사용하는 방법에 대해서는 <a href="upgrading_ruby_on_rails.html#config-secrets-yml">Ruby on Rails 업그레이드 가이드</a>를 참고해주세요.</p><h4 id="action-pack-variant"><a class="anchorlink" href="#action-pack-variant">2.3 Action Pack Variant</a></h4><p>스마트폰, 타블렛, 데스크탑 브라우저마다 다른 HTML/JSON/XML 템플릿을 사용하고 싶은 경우가 자주 있습니다. Variant를 사용하여 이를 간단하게 실현할 수 있습니다.</p><p>요청 variant는 <code>:tablet</code>, <code>:phone</code>, <code>:desktop</code>와 같은 요청 형식을 특수화한 것입니다.</p><p><code>before_action</code>에 다음의 variant를 설정합니다.</p><div class="code_container">
<pre class="brush: ruby; gutter: false; toolbar: false">
request.variant = :tablet if request.user_agent =~ /iPad/

</pre>
</div>
<p>액션에서는 형식의 응답과 같은 요령으로 variant에 응답할 수 있습니다.</p><div class="code_container">
<pre class="brush: ruby; gutter: false; toolbar: false">
respond_to do |format|
  format.html do |html|
    html.tablet # renders app/views/projects/show.html+tablet.erb
    html.phone { extra_setup; render ... }
  end
end

</pre>
</div>
<p>포맷마다, variant마다 개별의 템플릿을 준비해주세요.</p><div class="code_container">
<pre class="brush: plain; gutter: false; toolbar: false">
app/views/projects/show.html.erb
app/views/projects/show.html+tablet.erb
app/views/projects/show.html+phone.erb

</pre>
</div>
<p>다음의 인라인 문법을 사용하여 variant 정의를 간단하게 사용할 수도 있습니다.</p><div class="code_container">
<pre class="brush: ruby; gutter: false; toolbar: false">
respond_to do |format|
  format.js         { render "trash" }
  format.html.phone { redirect_to progress_path }
  format.html.none  { render "trash" }
end

</pre>
</div>
<h4 id="action-mailer-프리뷰"><a class="anchorlink" href="#action-mailer-%ED%94%84%EB%A6%AC%EB%B7%B0">2.4 Action Mailer 프리뷰</a></h4><p>Action Mailer 프리뷰는 특정 URL에 접근하여 전송될 메일이 어떤 모습으로 보이게 될 지 미리 볼 수 있게 해줍니다.</p><p>확인하고 싶은 메일 객체를 반환하는 메소드를 가지는 프리뷰 클래스를 정의해주세요.</p><div class="code_container">
<pre class="brush: ruby; gutter: false; toolbar: false">
class NotifierPreview &lt; ActionMailer::Preview
  def welcome
    Notifier.welcome(User.first)
  end
end

</pre>
</div>
<p>프리뷰를 출력하려면 <a href="http://localhost:3000/rails/mailers/notifier/welcome">http://localhost:3000/rails/mailers/notifier/welcome</a> 에 접속합니다. 프리뷰의 목록은 <a href="http://localhost:3000/rails/mailers">http://localhost:3000/rails/mailers</a> 에 있습니다.</p><p>기본 프리뷰 클래스는 <code>test/mailers/previews</code>에 위치합니다.
<code>preview_path</code> 옵션을 통해 이를 변경할 수 있습니다.</p><p>자세한 설명은 <a href="http://api.rubyonrails.org/v4.1.0/classes/ActionMailer/Base.html">문서</a>를 참조해주세요.</p><h4 id="active-record-enums"><a class="anchorlink" href="#active-record-enums">2.5 Active Record enums</a></h4><p>데이터베이스의 값을 integer로 사상하고 싶은 경우에는 enum 속성을 선언합니다만, 이름으로 쿼리를 요청할 수도 있습니다.</p><div class="code_container">
<pre class="brush: ruby; gutter: false; toolbar: false">
class Conversation &lt; ActiveRecord::Base
  enum status: [ :active, :archived ]
end

conversation.archived!
conversation.active? # =&gt; false
conversation.status  # =&gt; "archived"

Conversation.archived # =&gt; Relation for all archived Conversations

Conversation.statuses # =&gt; { "active" =&gt; 0, "archived" =&gt; 1 }

</pre>
</div>
<p>자세한 설명은 <a href="http://api.rubyonrails.org/v4.1.0/classes/ActiveRecord/Enum.html">메뉴얼</a>을 참고해주세요.</p><h4 id="메시지-검증자"><a class="anchorlink" href="#%EB%A9%94%EC%8B%9C%EC%A7%80-%EA%B2%80%EC%A6%9D%EC%9E%90">2.6 메시지 검증자</a></h4><p>메시지 검증자(message verifier)는 서명된 메시지를 생성 및 대조할 때에 사용합니다. 이 기능은 '패스워드를 저장(remember me)' 토큰이나 친구 목록 같은 비밀 데이터를 안전하게 전송할 때에 편리합니다.</p><p><code>Rails.application.message_verifier</code> 메소드는 secret_key_base를 사용하여 생성된 키로 새로운 메시지 검증자 이름과 서명된 메시지를 반환합니다.</p><div class="code_container">
<pre class="brush: ruby; gutter: false; toolbar: false">
signed_token = Rails.application.message_verifier(:remember_me).generate(token)
Rails.application.message_verifier(:remember_me).verify(signed_token) # =&gt; token

Rails.application.message_verifier(:remember_me).verify(tampered_token)
# ActiveSupport::MessageVerifier::InvalidSignature를 던진다.

</pre>
</div>
<h4 id="module-concerning"><a class="anchorlink" href="#module-concerning">2.7 Module#concerning</a></h4><p>자연스럽고 보기 좋도록, 클래스에서 책임을 분리합니다.</p><div class="code_container">
<pre class="brush: ruby; gutter: false; toolbar: false">
class Todo &lt; ActiveRecord::Base
  concerning :EventTracking do
    included do
      has_many :events
    end

    def latest_event
      ...
    end

    private
      def some_internal_method
        ...
      end
  end
end

</pre>
</div>
<p>이 예제는 <code>EventTracking</code> 모듈을 인라인으로 정의하고 <code>ActiveSupport::Concern</code>으로 extend하여 <code>Todo</code> 클래스에 믹스인한 것과 동등합니다.</p><p>자세한 설명 및 적당한 사용 예제에 대해서는 <a href="http://api.rubyonrails.org/v4.1.0/classes/Module/Concerning.html">메뉴얼</a>을 참조해주세요.</p><h4 id="원격-script-태그에-csrf-보호를-적용"><a class="anchorlink" href="#%EC%9B%90%EA%B2%A9-script-%ED%83%9C%EA%B7%B8%EC%97%90-csrf-%EB%B3%B4%ED%98%B8%EB%A5%BC-%EC%A0%81%EC%9A%A9">2.8 원격 <code>&lt;script&gt;</code> 태그에 CSRF 보호를 적용</a></h4><p>JavaScript 응답을 동반하는 GET 요청도 크로스 사이트 리퀘스트 포저리(CSRF) 보호 대상이 되었습니다. 이 보호를 통해 제3자 사이트가 중요한 데이터를 탈취를 위해 자신의 사이트의 JavaScript URL을 참조할 수 없게 됩니다.</p><p>이는 <code>xhr</code>를 사용하지 않는 경우 <code>.js</code> URL에 해당하는 모든 테스트는 CSRF 보호에 의해서 실패하게 된다는 의미입니다. <code>XmlHttpRequests</code>를 명시적으로 사용하도록 테스트를 개선해주세요. <code>post :create, format: :js</code> 대신에 명시적으로 <code>xhr :post, :create, format: :js</code>를 사용해주세요.</p><h3 id="railties"><a class="anchorlink" href="#railties">3 Railties</a></h3><p>자세한 변경사항은 <a href="https://github.com/rails/rails/blob/4-1-stable/railties/CHANGELOG.md">Changelog</a>를 참고해주세요.</p><h4 id="railties-삭제된-것들"><a class="anchorlink" href="#railties-%EC%82%AD%EC%A0%9C%EB%90%9C-%EA%B2%83%EB%93%A4">3.1 삭제된 것들</a></h4>
<ul>
<li><p><code>update:application_controller</code> rake task가 삭제되었습니다.</p></li>
<li><p>Deprecated였던 <code>Rails.application.railties.engines</code>이 삭제되었습니다.</p></li>
<li><p>Deprecated였던 <code>threadsafe!</code>가 Rails Config에서 삭제되었습니다.</p></li>
<li><p>Deprecated였던 <code>ActiveRecord::Generators::ActiveModel#update_attributes</code>가 삭제되었습니다. <code>ActiveRecord::Generators::ActiveModel#update</code>를 사용해주세요.</p></li>
<li><p>Deprecated였던 <code>config.whiny_nils</code> 옵션이 삭제되었습니다.</p></li>
<li><p>Deprecated였던 태스트 실행용 rake 태스크 <code>rake test:uncommitted</code>와 <code>rake test:recent</code>가 삭제되었습니다.</p></li>
</ul>
<h4 id="railties-주요-변경점"><a class="anchorlink" href="#railties-%EC%A3%BC%EC%9A%94-%EB%B3%80%EA%B2%BD%EC%A0%90">3.2 주요 변경점</a></h4>
<ul>
<li><p><a href="https://github.com/rails/spring">Spring 애플리케이션 로더</a>는 신규 애플리케이션에 기본으로 설치됩니다. Gemfile의 develop 그룹에 설치되며, production 그룹에는 설치되지 않습니다(<a href="https://github.com/rails/rails/pull/12958">Pull Request</a>).</p></li>
<li><p>테스트에 실패했을 때에 필터링되지 않는 백트레이스를 출력하는 <code>BACKTRACE</code> 환경 변수(<a href="https://github.com/rails/rails/commit/84eac5dab8b0fe9ee20b51250e52ad7bfea36553">Commit</a>).</p></li>
<li><p><code>MiddlewareStack#unshift</code>가 환경구성용으로 공개되었습니다(<a href="https://github.com/rails/rails/pull/12479">Pull Request</a>).</p></li>
<li><p>메시지 검증자를 반환하는 <code>Application#message_verifier</code> 메소드(<a href="https://github.com/rails/rails/pull/12995">Pull Request</a>).</p></li>
<li><p>기본으로 생성된 테스트 헬퍼에 require된 <code>test_help.rb</code> 파일은 <code>db/schema.rb</code>(또는 <code>db/structure.sql</code>)을 사용하여 자동적으로 테스트 데이터베이스를 최신 상태로 유지합니다. 스키마를 다시 읽더라도 적용되지 않은 마이그레이션이 남아있는 경우에는 에러가 발생합니다. <code>config.active_record.maintain_test_schema = false</code>를 지정하여 에러를 회피할 수 있습니다(<a href="https://github.com/rails/rails/pull/13528">Pull Request</a>).</p></li>
<li><p><code>Gem::Version.new(Rails.version)</code>을 반환하는 편의 메소드로서 <code>Rails.gem_version</code>가 도입되었습니다. 이전보다 신뢰할 수 있는 버전 비교법을 제공합니다(<a href="https://github.com/rails/rails/pull/14103">Pull Request</a>).</p></li>
</ul>
<h3 id="action-pack"><a class="anchorlink" href="#action-pack">4 Action Pack</a></h3><p>자세한 변경사항은 <a href="https://github.com/rails/rails/blob/4-1-stable/actionpack/CHANGELOG.md">Changelog</a>를 참고해주세요.</p><h4 id="action-pack-삭제된-것들"><a class="anchorlink" href="#action-pack-%EC%82%AD%EC%A0%9C%EB%90%9C-%EA%B2%83%EB%93%A4">4.1 삭제된 것들</a></h4>
<ul>
<li><p>Deprecated된 통합 테스트용 Rails 애플리케이션 폴백이 삭제되었습니다. <code>ActionDispatch.test_app</code>를 대신 사용해주세요.</p></li>
<li><p>Deprecated된 <code>page_cache_extension</code> config가 삭제되었습니다.</p></li>
<li><p>Deprecated된 <code>ActionController::RecordIdentifier</code>가 삭제되었습니다. <code>ActionView::RecordIdentifier</code>를 대신 사용해주세요.</p></li>
<li><p>다음의 Deprecated된 상수가 Action Controller에서 삭제되었습니다.</p></li>
</ul>

<table>
<thead>
<tr>
<th style="text-align: left">삭제됨</th>
<th style="text-align: left">대체품</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align: left">ActionController::AbstractRequest</td>
<td style="text-align: left">ActionDispatch::Request</td>
</tr>
<tr>
<td style="text-align: left">ActionController::Request</td>
<td style="text-align: left">ActionDispatch::Request</td>
</tr>
<tr>
<td style="text-align: left">ActionController::AbstractResponse</td>
<td style="text-align: left">ActionDispatch::Response</td>
</tr>
<tr>
<td style="text-align: left">ActionController::Response</td>
<td style="text-align: left">ActionDispatch::Response</td>
</tr>
<tr>
<td style="text-align: left">ActionController::Routing</td>
<td style="text-align: left">ActionDispatch::Routing</td>
</tr>
<tr>
<td style="text-align: left">ActionController::Integration</td>
<td style="text-align: left">ActionDispatch::Integration</td>
</tr>
<tr>
<td style="text-align: left">ActionController::IntegrationTest</td>
<td style="text-align: left">ActionDispatch::IntegrationTest</td>
</tr>
</tbody>
</table>
<h4 id="action-pack-주요-변경점"><a class="anchorlink" href="#action-pack-%EC%A3%BC%EC%9A%94-%EB%B3%80%EA%B2%BD%EC%A0%90">4.2 주요 변경점</a></h4>
<ul>
<li><p><code>protect_from_forgery</code>에 의해서 동일 도메인 <code>&lt;script&gt;</code> 태그도 사용할 수 없게 되었습니다. 테스트를 업데이트하여 <code>get :foo, format: :js</code> 대신에 <code>xhr :get, :foo, format: :js</code>를 사용해주세요(<a href="https://github.com/rails/rails/pull/13345">Pull Request</a>).</p></li>
<li><p><code>#url_for</code>는 옵션 해시를 배열에서 사용할 수 있게 되었습니다(<a href="https://github.com/rails/rails/pull/9599">Pull Request</a>).</p></li>
<li><p><code>session#fetch</code> 메소드가 추가되었습니다. 이 동작은 <a href="http://www.ruby-doc.org/core-1.9.3/Hash.html#method-i-fetch">Hash#fetch</a>와 비슷합니다만, 반환값이 언제나 세션에 저장된다는 점이 다릅니다(<a href="https://github.com/rails/rails/pull/12692">Pull Request</a>).</p></li>
<li><p>Action View는 Action Pack에서 완전히 분리되었습니다(<a href="https://github.com/rails/rails/pull/11032">Pull Request</a>).</p></li>
<li><p>deep_munge에 영향받은 키가 로그에 출력됩니다(<a href="https://github.com/rails/rails/pull/13813">Pull Request</a>).</p></li>
<li><p>보안 취약점 CVE-2013-0155에 대응하기 위해서 파라미터의 deep_munge화를 피하는 <code>config.action_dispatch.perform_deep_munge</code> config 옵션이 새로 추가되었습니다(<a href="https://github.com/rails/rails/pull/13188">Pull Request</a>).</p></li>
<li><p>서명과 암호화된 cookies jar의 직렬화를 지정하는 <code>config.action_dispatch.cookies_serializer</code> config 옵션이 새롭게 추가되었습니다(Pull Requests <a href="https://github.com/rails/rails/pull/13692">1</a>, <a href="https://github.com/rails/rails/pull/13945">2</a> / <a href="upgrading_ruby_on_rails.html#cookies-%EC%A7%81%EB%A0%AC%ED%99%94">자세한 설명</a>).</p></li>
<li><p><code>render :plain</code>, <code>render :html</code>, <code>render :body</code>가 추가되었습니다(<a href="https://github.com/rails/rails/pull/14062">Pull Request</a> / <a href="upgrading_ruby_on_rails.html#%EB%AC%B8%EC%9E%90%EC%97%B4%EC%97%90%EC%84%9C-%EC%BB%A8%ED%85%90%EC%B8%A0-%EC%B6%94%EC%B6%9C%ED%95%98%EA%B8%B0">자세한 설명</a>).</p></li>
</ul>
<h3 id="action-mailer"><a class="anchorlink" href="#action-mailer">5 Action Mailer</a></h3><p>자세한 변경에 대해서는 <a href="https://github.com/rails/rails/blob/4-1-stable/actionmailer/CHANGELOG.md">Changelog</a>를 참고해주세요.</p><h4 id="action-mailer-주요-변경점"><a class="anchorlink" href="#action-mailer-%EC%A3%BC%EC%9A%94-%EB%B3%80%EA%B2%BD%EC%A0%90">5.1 주요 변경점</a></h4>
<ul>
<li><p>37 Signals사의 mail_view gem을 기반으로 메일러의 프리뷰 기능이 추가되었습니다(<a href="https://github.com/rails/rails/commit/d6dec7fcb6b8fddf8c170182d4fe64ecfc7b2261">Commit</a>).</p></li>
<li><p>Action Mailer 메시지 생성 시간이 측정할 수 있게 되었습니다. 이 생성 시간이 로그에 기록됩니다(<a href="https://github.com/rails/rails/pull/12556">Pull Request</a>).</p></li>
</ul>
<h3 id="active-record"><a class="anchorlink" href="#active-record">6 Active Record</a></h3><p>자세한 변경에 대해서는 <a href="https://github.com/rails/rails/blob/4-1-stable/activerecord/CHANGELOG.md">Changelog</a>를 참고해주세요.</p><h4 id="active-record-삭제된-것들"><a class="anchorlink" href="#active-record-%EC%82%AD%EC%A0%9C%EB%90%9C-%EA%B2%83%EB%93%A4">6.1 삭제된 것들</a></h4>
<ul>
<li><p>Deprecated된 <code>SchemaCache</code> 메소드(<code>primary_keys</code>, <code>tables</code>, <code>columns</code>, <code>columns_hash</code>)에 nil을 넘기는 기능이 삭제되었습니다.</p></li>
<li><p>Deprecated된 블럭 필터가 <code>ActiveRecord::Migrator#migrate</code>로부터 삭제되었습니다.</p></li>
<li><p>Deprecated된 String 생성자가 <code>ActiveRecord::Migrator</code>로부터 삭제되었습니다.</p></li>
<li><p><code>scope</code>에서 호출 가능한 객체를 넘기지 않는 방식이 삭제되었습니다.</p></li>
<li><p>Deprecated된 <code>transaction_joinable=</code>이 삭제되었습니다. <code>:joinable</code> 옵션과 함께 <code>begin_transaction</code>를 사용해주세요.</p></li>
<li><p>Deprecated된 <code>decrement_open_transactions</code>이 삭제되었습니다.</p></li>
<li><p>Deprecated된 <code>increment_open_transactions</code>이 삭제되었습니다.</p></li>
<li><p>Deprecated된 <code>PostgreSQLAdapter#outside_transaction?</code> 메소드가 삭제되었습니다. 대신에 <code>#transaction_open?</code>을 사용해주세요.</p></li>
<li><p>Deprecated된 <code>ActiveRecord::Fixtures.find_table_name</code>가 삭제되었습니다. <code>ActiveRecord::Fixtures.default_fixture_model_name</code>를 사용해주세요.</p></li>
<li><p>Deprecated된 <code>columns_for_remove</code>가 <code>SchemaStatements</code>에서 삭제되었습니다.</p></li>
<li><p>Deprecated된 <code>SchemaStatements#distinct</code>가 삭제되었습니다.</p></li>
<li><p>Deprecated된 <code>ActiveRecord::TestCase</code>가 Rails 테스트 셋으로 옮겨졌습니다. 이 클래스는 public하지 않으며, Rails 테스트 내에서만 사용됩니다.</p></li>
<li><p>Association에서의 <code>:dependent</code>는 Deprecated된 <code>:restrict</code> 옵션을 더이상 지원하지 않습니다.</p></li>
<li><p>Association에서 Deprecated된 <code>:delete_sql</code>, <code>:insert_sql</code>, <code>:finder_sql</code>, <code>:counter_sql</code> 옵션이 삭제되었습니다.</p></li>
<li><p>Column에서 Deprecated된 <code>type_cast_code</code>가 삭제되었습니다.</p></li>
<li><p>Deprecated된 <code>ActiveRecord::Base#connection</code> 메소드가 삭제되었습니다. 이 메소드에는 클래스를 경유하여 사용해주세요.</p></li>
<li><p><code>auto_explain_threshold_in_seconds</code>의 Deprecated 경고가 삭제되었습니다.</p></li>
<li><p><code>Relation#count</code>에서 Deprecated된 <code>:distinct</code> 옵션이 삭제되었습니다.</p></li>
<li><p>Deprecated된 <code>partial_updates</code>, <code>partial_updates?</code>, <code>partial_updates=</code>가 삭제되었습니다.</p></li>
<li><p>Deprecated된 <code>scoped</code> 메소드가 삭제되었습니다.</p></li>
<li><p>Deprecated된 <code>default_scopes?</code>가 삭제되었습니다.</p></li>
<li><p>4.0에서 Deprecated였던 암묵 결합 참조가 삭제되었습니다.</p></li>
<li><p>의존관계로서의 <code>activerecord-deprecated_finders</code>가 삭제되었습니다. 상세한 설명은 <a href="https://github.com/rails/activerecord-deprecated_finders#active-record-deprecated-finders">gem README</a>를 참조해주세요.</p></li>
<li><p><code>implicit_readonly</code>의 용법이 삭제되었습니다. 명시적으로 <code>readonly</code> 메소드를 사용하여 레코드를 <code>readonly</code>로 설정해주세요(<a href="https://github.com/rails/rails/pull/10769">Pull Request</a>).</p></li>
</ul>
<h4 id="active-record-deprecated"><a class="anchorlink" href="#active-record-deprecated">6.2 Deprecated</a></h4>
<ul>
<li><p><code>quoted_locking_column</code> 메소드는 Deprecated되었습니다. 현재 사용되는 곳은 없습니다.</p></li>
<li><p><code>ConnectionAdapters::SchemaStatements#distinct</code>는 내부에서 사용되지 않기 때문에 Deprecated되었습니다(<a href="https://github.com/rails/rails/pull/10556">Pull Request</a>).</p></li>
<li><p><code>rake db:test:*</code> 태스크는 Deprecated되었습니다. 데이터베이스는 자동적으로 관리됩니다. railties의 릴리스 노트를 참고해주세요(<a href="https://github.com/rails/rails/pull/13528">Pull Request</a>).</p></li>
<li><p>사용되지 않는 <code>ActiveRecord::Base.symbolized_base_class</code>, 그리고 <code>ActiveRecord::Base.symbolized_sti_name</code>가 Deprecated되었습니다. <a href="https://github.com/rails/rails/commit/97e7ca48c139ea5cce2fa9b4be631946252a1ebd">Commit</a></p></li>
</ul>
<h4 id="active-record-주요-변경점"><a class="anchorlink" href="#active-record-%EC%A3%BC%EC%9A%94-%EB%B3%80%EA%B2%BD%EC%A0%90">6.3 주요 변경점</a></h4><p>기본 스코프는 조건을 연쇄시킨 경우 재정의할 수 없게 변경되었습니다.</p><p>  이번 변경에 의해서 이전 모델에서 <code>default_scope</code>를 정의하고 있는 경우 같은 필드에서 조건이 연쇄되는 경우에 재정의하지 않게 되었습니다. 현재는 다른 스코프들과 마찬가지로 병합됩니다. <a href="upgrading_ruby_on_rails.html#%EA%B8%B0%EB%B3%B8-%EC%8A%A4%EC%BD%94%ED%94%84%EC%9D%98-%EB%B3%80%EA%B2%BD">자세한 설명</a></p>
<ul>
<li><p>모델의 속성이나 메소드로부터 파생되는 "깔끔한" URL용으로 <code>ActiveRecord::Base.to_param</code>가 추가되었습니다(<a href="https://github.com/rails/rails/pull/12891">Pull Request</a>).</p></li>
<li><p><code>ActiveRecord::Base.no_touching</code>가 추가되었습니다. 모델에 대한 터치를 무시합니다(<a href="https://github.com/rails/rails/pull/12772">Pull Request</a>).</p></li>
<li><p><code>MysqlAdapter</code>와 <code>Mysql2Adapter</code>에 의해서 형변환의 판정이 통일되었습니다. <code>type_cast</code>는 <code>true</code>인 경우에 <code>1</code>을, <code>false</code>의 경우에 <code>2</code>를 반환합니다(<a href="https://github.com/rails/rails/pull/12425">Pull Request</a>).</p></li>
<li><p><code>.unscope</code>를 지정하면 <code>default_scope</code>로 지정된 조건이 삭제됩니다(<a href="https://github.com/rails/rails/commit/94924dc32baf78f13e289172534c2e71c9c8cade">Commit</a>).</p></li>
<li><p><code>ActiveRecord::QueryMethods#rewhere</code>이 추가되었습니다. 현재의 이름있는 where 조건을 재정의합니다(<a href="https://github.com/rails/rails/commit/f950b2699f97749ef706c6939a84dfc85f0b05f2">Commit</a>).</p></li>
<li><p><code>ActiveRecord::Base#cache_key</code>가 확장되어 timestamp 속성 목록을 옵션으로 받을 수 있게 되었습니다. timestamp 속성 목록에서 최대값이 사용됩니다(<a href="https://github.com/rails/rails/commit/e94e97ca796c0759d8fcb8f946a3bbc60252d329">Commit</a>).</p></li>
<li><p>enum 속성을 선언하는 <code>ActiveRecord::Base#enum</code>가 추가되었습니다. enum 속성은 데이터베이스의 integer에 사상합니다만, 이름으로 쿼리할 수 있습니다(<a href="https://github.com/rails/rails/commit/db41eb8a6ea88b854bf5cd11070ea4245e1639c5">Commit</a>).</p></li>
<li><p>json값이 저장될 때에 형변환됩니다. 이를 통해서 데이터베이스에서 꺼낸 값과 일관되게 유지합니다(<a href="https://github.com/rails/rails/pull/12643">Pull Request</a>).</p></li>
<li><p>hstore값이 저장될 때에 형변환됩니다. 이를 통해서 데이터베이스에서 꺼낸 값과 일관되게 유지합니다(<a href="https://github.com/rails/rails/commit/5ac2341fab689344991b2a4817bd2bc8b3edac9d">Commit</a>).</p></li>
<li><p>서드파티에서 만든 제너레이터를 위해 <code>next_migration_number</code>가 접근 가능하게 변경되었습니다(<a href="https://github.com/rails/rails/pull/12407">Pull Request</a>).</p></li>
<li><p>인수를 <code>nil</code>로 해서 <code>update_attributes</code>를 호출하면 항상 <code>ArgumentError</code> 에러가 발생합니다. 구체적으로는 넘겨진 인수가 <code>stringify_keys</code>에 응답하지 않는 경우에 에러가 발생합니다(<a href="https://github.com/rails/rails/pull/9860">Pull Request</a>).</p></li>
<li><p><code>CollectionAssociation#first</code>/<code>#last</code> (<code>has_many</code> 등)에 의한 결과로 컬렉션 전체를 불러오는 쿼리 대신에 한정적인 쿼리가 사용되게 됩니다(<a href="https://github.com/rails/rails/pull/12137">Pull Request</a>).</p></li>
<li><p>Active Record 모델 클래스의 <code>inspect</code>는 새로운 접속을 초기화하지 않습니다. 다시 말해, 데이터베이스가 발견되지 않은 상태에서 <code>inspect</code>를 호출한 경우에 예외가 발생하지 않습니다(<a href="https://github.com/rails/rails/pull/11014">Pull Request</a>).</p></li>
<li><p><code>count</code> 컬럼 제약이 삭제되었습니다. SQL이 무효인 경우에는 데이터베이스에서 에러가 발생됩니다(<a href="https://github.com/rails/rails/pull/10710">Pull Request</a>).</p></li>
<li><p>Rails가 역관계를 자동으로 검출하게 되었습니다. Association에서 <code>:inverse_of</code> 옵션을 설정하지 않은 경우, Active Record는 휴리스틱으로 역관계를 추측합니다(<a href="https://github.com/rails/rails/pull/10886">Pull Request</a>).</p></li>
<li><p>ActiveRecord::Relation의 속성의 별칭을 다룰수 있게 되었습니다. 심볼 키를 사용하면 ActiveRecord는 별칭을 사용해서 데이터베이스 상의 실제 컬럼명을 선택합니다(<a href="https://github.com/rails/rails/pull/7839">Pull Request</a>).</p></li>
<li><p>픽스처의 ERB 파일은 메인 객체의 컨텍스트에서 평가되지 않습니다. 복수의 픽스쳐에서 사용되고 있는 헬퍼 메소드는 <code>ActiveRecord::FixtureSet.context_class</code>에서 포함되는 모듈상에 정의해야합니다(<a href="https://github.com/rails/rails/pull/13022">Pull Request</a>).</p></li>
<li><p>RAILS_ENV가 명시적으로 지정되어 있는 경우에 테스트 데이터베이스의 create나 drop을 사용하지 않습니다(<a href="https://github.com/rails/rails/pull/13629">Pull Request</a>).</p></li>
</ul>
<p><code>Relation</code>에는 <code>#map!</code>나 <code>#delete_if</code> 등의 변경 메소드(mutator method)가 포함되지 않게 되었습니다. 이러한 메소드를 사용하고 싶은 경우에는 <code>#to_a</code>를 호출하여 <code>Array</code>로 변경해주세요(<a href="https://github.com/rails/rails/pull/13314">Pull Request</a>).</p>
<ul>
<li><p><code>find_in_batches</code>, <code>find_each</code>, <code>Result#each</code>, 그리고 <code>Enumerable#index_by</code>는 자신의 사이즈를 계산 가능한 <code>Enumerator</code>를 반환하게 되었습니다(<a href="https://github.com/rails/rails/pull/13938">Pull Request</a>).</p></li>
<li><p><code>scope</code>, <code>enum</code>과 Associations에서 "dangerous" 이름 충돌이 발생하게 되었습니다(<a href="https://github.com/rails/rails/pull/13450">Pull Request</a>, <a href="https://github.com/rails/rails/pull/13896">Pull Request</a>).</p></li>
<li><p><code>second</code>에서 <code>fifth</code>까지의 메소드도 <code>first</code> 파인더와 동일한 방식으로 동작합니다(<a href="https://github.com/rails/rails/pull/13757">Pull Request</a>).</p></li>
<li><p><code>touch</code>가 <code>after_commit</code>과 <code>after_rollback</code> 콜백을 실행하도록 변경되었습니다(<a href="https://github.com/rails/rails/pull/12031">Pull Request</a>).</p></li>
<li><p><code>sqlite &gt;= 3.8.0</code>에서 파셜 인덱스가 활성화되었습니다(<a href="https://github.com/rails/rails/pull/13350">Pull Request</a>).</p></li>
<li><p><code>change_column_null</code>가 복원 가능해졌습니다(<a href="https://github.com/rails/rails/commit/724509a9d5322ff502aefa90dd282ba33a281a96">Commit</a>).</p></li>
<li><p>마이그레이션 후 무효화된 스키마 덤프에 플래그가 추가되었습니다. 이는 새로운 애플리케이션의 production 환경에서는 기본으로 <code>false</code>로 설정됩니다(<a href="https://github.com/rails/rails/pull/13948">Pull Request</a>).</p></li>
</ul>
<h3 id="active-model"><a class="anchorlink" href="#active-model">7 Active Model</a></h3><p>자세한 변경은 <a href="https://github.com/rails/rails/blob/4-1-stable/activemodel/CHANGELOG.md">Changelog</a>를 참조하세요.</p><h4 id="active-model-deprecated"><a class="anchorlink" href="#active-model-deprecated">7.1 Deprecated</a></h4>
<ul>
<li>
<code>Validator#setup</code>는 Deprecated되었습니다. 이후에는 검증자의 생성자에서 수동으로 처리해야합니다(<a href="https://github.com/rails/rails/commit/7d84c3a2f7ede0e8d04540e9c0640de7378e9b3a">Commit</a>).</li>
</ul>
<h4 id="active-model-주요-변경점"><a class="anchorlink" href="#active-model-%EC%A3%BC%EC%9A%94-%EB%B3%80%EA%B2%BD%EC%A0%90">7.2 주요 변경점</a></h4>
<ul>
<li><p><code>ActiveModel::Dirty</code>에 상태를 제어하는 새로운 API인 <code>reset_changes</code>와 <code>changes_applied</code>가 추가되었습니다.</p></li>
<li><p>검증을 정의할 때에 복수의 컨텍스트를 지정할 수 있게 되었습니다(<a href="https://github.com/rails/rails/pull/13754">Pull Request</a>).</p></li>
<li><p><code>attribute_changed?</code>가 해시를 받을 수 있게 되었으며, 속정이 주어진 값으로 변경되었거나(또는 주어진 값으로 변경되었는지)를 확인할 수 있게 되었습니다(<a href="https://github.com/rails/rails/pull/13131">Pull Request</a>).</p></li>
</ul>
<h3 id="active-support"><a class="anchorlink" href="#active-support">8 Active Support</a></h3><p>자세한 변경사항은 <a href="https://github.com/rails/rails/blob/4-1-stable/activesupport/CHANGELOG.md">Changelog</a>을 참고해주세요.</p><h4 id="active-support-삭제된-것들"><a class="anchorlink" href="#active-support-%EC%82%AD%EC%A0%9C%EB%90%9C-%EA%B2%83%EB%93%A4">8.1 삭제된 것들</a></h4>
<ul>
<li><p><code>MultiJSON</code> 의존이 제거되었습니다. 이를 통해 <code>ActiveSupport::JSON.decode</code>는 <code>MultiJSON</code>의 옵션 해시를 받지 않게 되었습니다(<a href="https://github.com/rails/rails/pull/10576">Pull Request</a> / <a href="upgrading_ruby_on_rails.html#json-%EC%B7%A8%EA%B8%89-%EB%B0%A9%EC%8B%9D%EC%9D%98-%EB%B3%80%EA%B2%BD%EC%A0%90">자세한 설명</a>).</p></li>
<li><p>커스텀 객체를 JSON으로 인코딩하는 <code>encode_json</code> 훅의 지원이 삭제되었습니다. 이 기능은 <a href="https://github.com/rails/activesupport-json_encoder">activesupport-json_encoder</a> gem으로 분리되었습니다.</p></li>
<li><p>Deprecated된 <code>ActiveSupport::JSON::Variable</code>가 삭제되었습니다.</p></li>
<li><p>Deprecated된 <code>String#encoding_aware?</code> 코어 확장기능 (<code>core_ext/string/encoding</code>)이 삭제되었습니다.</p></li>
<li><p>Deprecated된 <code>Module#local_constant_names</code>이 삭제되었습니다. 대신 <code>Module#local_constants</code>를 사용합니다.</p></li>
<li><p>Deprecated된 <code>DateTime.local_offset</code>가 삭제되었습니다. <code>DateTime.civil_from_format</code>를 사용합니다.</p></li>
<li><p>Deprecated된 <code>Logger</code> 코어 확장기능(<code>core_ext/logger.rb</code>)이 삭제되었습니다.</p></li>
<li><p>Deprecated된 <code>Time#time_with_datetime_fallback</code>, <code>Time#utc_time</code>, <code>Time#local_time</code>이 삭제되었습니다. <code>Time#utc</code>와 <code>Time#local</code>를 사용합니다.</p></li>
<li><p>Deprecated된 <code>Hash#diff</code>가 삭제되었습니다.</p></li>
<li><p>Deprecated된 <code>Date#to_time_in_current_zone</code>가 삭제되었습니다. 대신 <code>Date#in_time_zone</code>를 사용합니다.</p></li>
<li><p>Deprecated된 <code>Proc#bind</code>가 삭제되었습니다.</p></li>
<li><p>Deprecated된 <code>Array#uniq_by</code>와 <code>Array#uniq_by!</code>가 삭제되었습니다. 원래의 <code>Array#uniq</code>와 <code>Array#uniq!</code>를 사용해주세요.</p></li>
<li><p>Deprecated된 <code>ActiveSupport::BasicObject</code>가 삭제되었습니다. 대신 <code>ActiveSupport::ProxyObject</code>를 사용해주세요.</p></li>
<li><p>Deprecated된 <code>BufferedLogger</code>가 삭제되었습니다. 대신 <code>ActiveSupport::Logger</code>를 사용해주세요.</p></li>
<li><p>Deprecated된 <code>assert_present</code> 메소드와 <code>assert_blank</code> 메소드가 삭제되었습니다. 대신 <code>assert object.blank?</code>와 <code>assert object.present?</code>를 사용해주세요.</p></li>
<li><p>필터 객체용으로 Deprecated되었던 <code>#filter</code> 메소드가 삭제되었습니다. 대응하는 다른 메소드를 사용해주세요(before filter의 <code>#before</code> 등).</p></li>
<li><p>기본 활용형으로부터 불규칙 활용인 'cow' =&gt; 'kine'가 삭제되었습니다(<a href="https://github.com/rails/rails/commit/c300dca9963bda78b8f358dbcb59cabcdc5e1dc9">Commit</a>).</p></li>
</ul>
<h4 id="deprecated"><a class="anchorlink" href="#deprecated">8.2 Deprecated</a></h4>
<ul>
<li><p>시간 표현 <code>Numeric#{ago,until,since,from_now}</code>이 Deprecated되었습니다. 이 값은 AS::Duration으로 명시적으로 변환해주세요. 예: <code>5.ago</code> =&gt; <code>5.seconds.ago</code>(<a href="https://github.com/rails/rails/pull/12389">Pull Request</a>)</p></li>
<li><p>require 경로 <code>active_support/core_ext/object/to_json</code>가 Deprecated되었습니다. <code>active_support/core_ext/object/json</code>를 대신에 require해주세요(<a href="https://github.com/rails/rails/pull/12203">Pull Request</a>).</p></li>
<li><p><code>ActiveSupport::JSON::Encoding::CircularReferenceError</code>가 Deprecated되었습니다. 이 기능은 <a href="https://github.com/rails/activesupport-json_encoder">activesupport-json_encoder</a> gem으로 분리되었습니다. (<a href="https://github.com/rails/rails/pull/10785">Pull Request</a> / <a href="upgrading_ruby_on_rails.html#json-%EC%B7%A8%EA%B8%89-%EB%B0%A9%EC%8B%9D%EC%9D%98-%EB%B3%80%EA%B2%BD%EC%A0%90">자세한 설명</a>)</p></li>
<li><p><code>ActiveSupport.encode_big_decimal_as_string</code> 옵션이 Deprecated되었습니다. 이 기능은 <a href="https://github.com/rails/activesupport-json_encoder">activesupport-json_encoder</a> gem으로 분리되었습니다.
(<a href="https://github.com/rails/rails/pull/13060">Pull Request</a> / <a href="upgrading_ruby_on_rails.html#json-%EC%B7%A8%EA%B8%89-%EB%B0%A9%EC%8B%9D%EC%9D%98-%EB%B3%80%EA%B2%BD%EC%A0%90">자세한 설명</a>)</p></li>
<li><p>커스텀 <code>BigDecimal</code> 직렬화가 Deprecated되었습니다(<a href="https://github.com/rails/rails/pull/13911">Pull Request</a>).</p></li>
</ul>
<h4 id="active-support-주요-변경점"><a class="anchorlink" href="#active-support-%EC%A3%BC%EC%9A%94-%EB%B3%80%EA%B2%BD%EC%A0%90">8.3 주요 변경점</a></h4>
<ul>
<li><p><code>ActiveSupport</code>의 JSON 인코더가 재작성되었으며 pure-Ruby의 커스텀 인코딩이 아닌 JSON gem을 사용하게 되었습니다.
(<a href="https://github.com/rails/rails/pull/12183">Pull Request</a> / <a href="upgrading_ruby_on_rails.html#json-%EC%B7%A8%EA%B8%89-%EB%B0%A9%EC%8B%9D%EC%9D%98-%EB%B3%80%EA%B2%BD%EC%A0%90">자세한 설명</a>)</p></li>
<li><p>JSON gem과의 호환성이 향상되었습니다.
(<a href="https://github.com/rails/rails/pull/12862">Pull Request</a> / <a href="upgrading_ruby_on_rails.html#json-%EC%B7%A8%EA%B8%89-%EB%B0%A9%EC%8B%9D%EC%9D%98-%EB%B3%80%EA%B2%BD%EC%A0%90">자세한 설명</a>)</p></li>
<li><p><code>ActiveSupport::Testing::TimeHelpers#travel</code>과 <code>#travel_to</code>가 추가되었습니다. 이 메소드들은 <code>Time.now</code>와 <code>Date.today</code>를 스텁화하여 현재시각을 지정된 시각, 또는 시간으로 변환합니다.</p></li>
<li><p><code>ActiveSupport::Testing::TimeHelpers#travel_back</code>가 추가되었습니다. 이 메소드는 <code>travel</code>과 <code>travel_to</code> 메소드에 의해서 추가된 스텁을 제거하여 현재시각을 원래대로 되돌립니다(<a href="https://github.com/rails/rails/pull/13884">Pull Request</a>).</p></li>
<li><p><code>Numeric#in_milliseconds</code>가 추가되었습니다. <code>1.hour.in_milliseconds</code>처럼 사용할 수 있으며, 이를 <code>getTime()</code>등의 JavaScript 함수에 넘길 수도 있습니다(<a href="https://github.com/rails/rails/commit/423249504a2b468d7a273cbe6accf4f21cb0e643">Commit</a>).</p></li>
<li><p><code>Date#middle_of_day</code>, <code>DateTime#middle_of_day</code>, <code>Time#middle_of_day</code> 메소드가 추가되었습니다. 별칭으로 <code>midday</code>, <code>noon</code>, <code>at_midday</code>, <code>at_noon</code>, <code>at_middle_of_day</code>도 추가되었습니다(<a href="https://github.com/rails/rails/pull/10879">Pull Request</a>).</p></li>
<li><p>기간을 생성하는 <code>Date#all_week/month/quarter/year</code>가 추가되었습니다(<a href="https://github.com/rails/rails/pull/9685">Pull Request</a>).</p></li>
<li><p><code>Time.zone.yesterday</code>와 <code>Time.zone.tomorrow</code>가 추가되었습니다(<a href="https://github.com/rails/rails/pull/12822">Pull Request</a>).</p></li>
<li><p>자주 사용되는 <code>String#gsub("pattern,'')</code>의 간결한 표현으로서 <code>String#remove(pattern)</code>가 추가되었습니다(<a href="https://github.com/rails/rails/commit/5da23a3f921f0a4a3139495d2779ab0d3bd4cb5f">Commit</a>).</p></li>
<li><p>해시에서 값이 nil인 항목을 제거하기 위해서 <code>Hash#compact</code>와 <code>Hash#compact!</code>가 추가되었습니다(<a href="https://github.com/rails/rails/pull/13632">Pull Request</a>).</p></li>
<li><p><code>blank?</code>와 <code>present?</code>는 싱글톤을 반환합니다(<a href="https://github.com/rails/rails/commit/126dc47665c65cd129967cbd8a5926dddd0aa514">Commit</a>).</p></li>
<li><p>새로운 <code>I18n.enforce_available_locales</code> config의 기본값이 <code>true</code>입니다. 이것은 로케일에 넘겨진 <code>I18n</code>이 <code>available_locales</code> 목록에 포함되어 있어야한다는 의미입니다(<a href="https://github.com/rails/rails/pull/13341">Pull Request</a>).</p></li>
</ul>
<p><code>Module#concerning</code>가 도입되었습니다. 자연스럽고, 보기 좋은 방식으로 클래스에서 책임을 분리합니다(<a href="https://github.com/rails/rails/commit/1eee0ca6de975b42524105a59e0521d18b38ab81">Commit</a>).</p>
<ul>
<li>
<code>Object#presence_in</code>가 추가되었습니다. 값의 화이트리스트화를 간략화합니다(<a href="https://github.com/rails/rails/commit/4edca106daacc5a159289eae255207d160f22396">Commit</a>).</li>
</ul>
<h3 id="크레딧-표기"><a class="anchorlink" href="#%ED%81%AC%EB%A0%88%EB%94%A7-%ED%91%9C%EA%B8%B0">9 크레딧 표기</a></h3><p>Rails를 견고하고 안정적인 프레임워크로 만들기 위해 많은 시간을 사용해주신 많은 개발자들에 대해서는 <a href="http://contributors.rubyonrails.org/">Rails 기여자 목록</a>을 참고해주세요. 이 분들에게 경의를 표합니다.</p><div class="info"><p>이 가이드는 <a href="http://railsguides.jp">Rails Guilde 일본어판</a>으로부터 번역되었습니다.</p></div>

        <h3>피드백</h3>
        <p>
          이 가이드의 질을 향상시키기 위한 도움을 기다리고 있습니다.
        </p>
        <p>
          수정이 필요한 오타나 에러를 발견하면 기여해주세요. 이를 위해서 <a href="http://edgeguides.rubyonrails.org/contributing_to_ruby_on_rails.html#contributing-to-the-rails-documentation">기여 가이드</a>를 읽어주세요.
        </p>
        <p>
          미완성된 내용이나 업데이트되지 않은 내용이 있을 수 있습니다. 누락된 문서를 추가해 주시기 바랍니다. <a href="http://edgeguides.rubyonrails.org">최신 가이드</a>나 마스터 브랜치를 참고하여 이미 고쳐지지 않았는지 확인하세요. 문서작성시 참고해야할 스타일과 규칙은 <a href="ruby_on_rails_guides_guidelines.html">Ruby on Rails Guides Guidelines</a>를 확인하시기 바랍니다.
        </p>
        <p>
          어떤 이유에서든지, 수정이 필요한 부분을 직접 변경할 수 없는 경우에는 <a href="https://github.com/rails/rails/issues">open an issue</a>로 접속하여 문제점을 제출해 주시기 바랍니다.
        </p>
        <p>
          마지막으로, 루비온레일스 문서화에 관련된 논의가 필요한 사항은 <a href="http://groups.google.com/group/rubyonrails-docs">rubyonrails-docs mailing list</a>에서 해 주시기 바랍니다.
        </p>
        <h3>문서생성일</h3>
        <p>최종 생성일 : 2017-06-04 12:02:00 +0000 </p>
      </div>
    </div>
  </div>

  <hr class="hide" />
  <div id="footer">
    <div class="wrapper">
      <p>레일스 가이드는 <a href="https://creativecommons.org/licenses/by-sa/4.0/deed.ko">Creative Commons Attribution-ShareAlike 4.0 International</a> 로 배포되고 있습니다.</p>
<p>"Rails", "Ruby on Rails", 그리고 레일스 로고는 David Heinemeier Hansson의 등록상표이며, 저작권 보호를 받고 있습니다.</p>


    </div>
  </div>

  <script type="text/javascript" src="javascripts/jquery.min.js"></script>
  <script type="text/javascript" src="javascripts/responsive-tables.js"></script>
  <script type="text/javascript" src="javascripts/guides.js"></script>
  <script type="text/javascript" src="javascripts/syntaxhighlighter.js"></script>
  <script type="text/javascript">
    syntaxhighlighterConfig = {
      autoLinks: false,
    };
    $(guidesIndex.bind);
  </script>
</body>
</html>
